(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4331:function(e,t,s){Promise.resolve().then(s.bind(s,1776))},1776:function(e,t,s){"use strict";let a;s.r(t),s.d(t,{default:function(){return eM}});var i=s(7437),r=s(2265),l=s(5166),n=s(7790),c=s(7480),o=s(8654),d=s(3274),u=s(205),m=s(2218),h=s(6780),x=s(4839),f=s(6164);function p(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,f.m6)((0,x.W)(t))}let g=(0,m.j)("text-left border border-black rounded-lg p-4",{variants:{intent:{info:"alert-info",danger:"border-red-200 text-red-600 bg-red-50"}},defaultVariants:{intent:"info"}}),v=e=>{let{children:t,intent:s,title:a}=e;return(0,i.jsxs)("div",{className:g({intent:s}),children:[(0,i.jsxs)(b,{children:["danger"===s&&(0,i.jsx)(h.Z,{size:18}),a]}),t]})},b=r.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("p",{ref:t,className:p("text-base font-bold flex items-center gap-2 mb-2",s),...a})});b.displayName="AlertTitle";var j=s(1538);let y=(0,m.j)("inline-flex gap-2 items-center justify-center whitespace-nowrap rounded-xl border text-base font-semibold ring-ring transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&>svg]:size-5",{variants:{variant:{primary:"border-primary bg-primary text-primary-foreground hover:bg-primary/90 disabled:text-primary-foreground/50",success:"border-emerald-200 bg-emerald-200 text-emerald-800 hover:bg-teal/90 disabled:text-teal-800/50",ghost:"border-primary-200 bg-white text-primary hover:border-primary-300 hover:bg-white/0 disabled:text-primary-foreground/50",outline:"button-outline",light:"border-transparent bg-transparent hover:bg-primary/[.07]",icon:"bg-transparent border-0 hover:bg-primary-200"},size:{default:"h-12 px-6 py-2",sm:"h-9 px-3 text-sm",lg:"h-11 rounded-md px-8",icon:"h-12 w-12",iconSm:"h-9 w-9"}},defaultVariants:{variant:"primary",size:"default"}}),_=r.forwardRef((e,t)=>{let{variant:s,size:a,fullWidthMobile:r,className:l,asChild:n=!1,...c}=e,o=n?j.g7:"button";return(0,i.jsx)(o,{ref:t,className:p(y({variant:s,size:a}),r?"w-full md:w-auto":"",l),...c})});_.displayName="Button";let w=r.forwardRef((e,t)=>{let{className:s,shadow:a,fullWidthMobile:r=!0,...l}=e;return(0,i.jsx)("div",{ref:t,className:p("rounded-3xl border border-transparent bg-origin-border borderClip bg-cardBorder",a&&"shadow-long",r&&"w-full max-w-full min-w-full md:min-w-0",s),...l})});w.displayName="Card";let N=r.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("div",{ref:t,className:p("flex flex-col space-y-3 p-6 lg:p-9",s),...a})});N.displayName="CardHeader";let C=r.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("h3",{ref:t,className:p("text-2xl font-semibold leading-none tracking-tight text-pretty",s),...a})});C.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("p",{ref:t,className:p("text-lg text-pretty text-primary-500",s),...a})}).displayName="CardDescription";let k=r.forwardRef((e,t)=>{let{className:s,stack:a=!1,...r}=e;return(0,i.jsx)("div",{ref:t,className:p("p-6 pt-0 lg:p-9 lg:pt-0",a&&"flex flex-col gap-3 lg:gap-4",s),...r})});k.displayName="CardContent";let S=r.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("div",{ref:t,className:p("flex justify-center items-center p-6 pt-0 lg:p-9 lg:pt-0",s),...a})});S.displayName="CardFooter";var z=s(4887),G=s(8805),V=s(9100),A=s(4258),E=s(9896);class M{addStat(e){var t;let[s,a,i]=e;if(!s||!a||i<=0)return;this.statsMap[s]||(this.statsMap[s]={});let r=[...(null===(t=this.statsMap[s][a])||void 0===t?void 0:t.timeseries)||[],i],l=r.reduce((e,t)=>e+t,0)/r.length,n=r.reduce((e,t)=>Math.max(e,t),0),c=r.reduce((e,t)=>Math.min(e,t),1/0);this.statsMap[s][a]={latest:i,timeseries:r,median:l,high:n,low:c},this.hasNewStats=!0}getStats(){return this.hasNewStats?(this.hasNewStats=!1,this.statsMap):null}constructor(){this.statsMap={},this.hasNewStats=!1,this.turns=0}}let F={llm:"anthropic",tts:"openai_tts"},R=[{name:"Agriculture",value:"en",ttsVoice:"79a125e8-cd45-4c13-8a67-188112f4dd22"},{name:"Health",value:"hi",ttsVoice:"79a125e8-cd45-4c13-8a67-188112f4dd22"},{name:"Education",value:"ta",ttsVoice:"79a125e8-cd45-4c13-8a67-188112f4dd22"}],I=[{name:"English",value:"en",ttsVoice:"79a125e8-cd45-4c13-8a67-188112f4dd22"},{name:"Hindi",value:"hi",ttsVoice:"79a125e8-cd45-4c13-8a67-188112f4dd22"},{name:"Tamil",value:"ta",ttsVoice:"79a125e8-cd45-4c13-8a67-188112f4dd22"},{name:"Telugu",value:"te",ttsVoice:"79a125e8-cd45-4c13-8a67-188112f4dd22"}],Z=[{service:"tts",options:[{name:"voice",value:"alloy"},{name:"language",value:"en"},{name:"model",value:"tts-1"}]},{service:"llm",options:[{name:"model",value:"claude-3-5-sonnet-20240620"},{name:"initial_messages",value:[{role:"system",content:""},{role:"user",content:"Reply in the language user request to don't to tell translation of the reply just reply in the language user request. So just Start by Saying 'Hello, how can i help you?' only just that"}]},{name:"run_on_config",value:!0}]}],B=(0,s(903).U)(e=>({selectedLanguage:I[0].value,ttsVoice:I[0].ttsVoice,setLanguage:async(t,s)=>{let a=I.find(e=>e.value===t);a&&(e({selectedLanguage:a.value,ttsVoice:a.ttsVoice}),await s.updateConfig([{service:"stt",options:[{name:"model",value:"nova-2-general"},{name:"language",value:a.value}]},{service:"tts",options:[{name:"voice",value:a.ttsVoice}]}]))}}));var L=s(9687);l.zt;let T=l.fC,W=l.xz,q=r.forwardRef((e,t)=>{let{className:s,sideOffset:a=4,...r}=e;return(0,i.jsx)(l.VY,{ref:t,sideOffset:a,className:p("z-50 overflow-hidden rounded-md text-white bg-primary-700 px-3 py-1.5 text-sm shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})});q.displayName=l.VY.displayName;var H=e=>{let{text:t,className:s}=e;return(0,i.jsxs)(T,{children:[(0,i.jsx)(W,{children:(0,i.jsx)(L.Z,{size:16,className:p("text-primary-400 hidden md:block",s)})}),(0,i.jsx)(q,{asChild:!0,children:(0,i.jsx)("span",{className:"text-sm font-medium",children:t})})]})};let O=e=>{let{className:t,children:s}=e;return(0,i.jsx)("label",{className:p("font-medium text-sm",t),children:s})};O.displayName="Label";var D=s(3037);let P=r.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)(D.fC,{className:p("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-primary-300",s),...a,ref:t,children:(0,i.jsx)(D.bU,{className:p("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});P.displayName=D.fC.displayName;let U=(0,m.j)("appearance-none bg-none bg-white bg-selectArrow bg-no-repeat bg-selectArrow flex h-12 px-3 pr-10 w-full rounded-xl border border-primary-200 text-sm ring-ring file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{variants:{variant:{default:"",danger:"border-red-500 text-red-500 focus-visible:ring-red-500 placeholder:text-red-300"}},defaultVariants:{variant:"default"}}),Y=e=>{let{variant:t,className:s,children:a,icon:r,...l}=e;return(0,i.jsxs)("div",{className:"relative w-full",children:[r&&(0,i.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-primary-500",children:r}),(0,i.jsx)("select",{className:p(U({variant:t}),r?"pl-11":"",s),...l,children:a})]})};Y.displayName="Input";var J=s(9333),K=s(2132);let Q=e=>{let{className:t,label:s,error:a,children:r}=e;return(0,i.jsxs)("div",{className:p("flex flex-col items-start gap-2 w-full",t),children:[(0,i.jsx)(O,{className:"font-medium text-sm",children:s}),r,a&&(0,i.jsx)("p",{className:"text-xs font-semibold text-red-500",children:a})]})};Q.displayName="Field";var X=s(1942),$=s.n(X);let ee=()=>{let e=(0,r.useRef)(null);return(0,o.GG)(n.io.LocalAudioLevel,(0,r.useCallback)(t=>{e.current&&(e.current.style.width=Math.max(2,100*t)+"%")},[])),(0,i.jsx)("div",{className:$().bar,children:(0,i.jsx)("div",{ref:e})})};var et=e=>{let{hideMeter:t=!1}=e,{availableMics:s,selectedMic:a,updateMic:l,availableCams:n,selectedCam:c,updateCam:d}=(0,o.bB)();return(0,r.useEffect)(()=>{l(null==a?void 0:a.deviceId),d(null==c?void 0:c.deviceId)},[l,a,d,c]),(0,i.jsxs)("div",{className:"flex flex-col flex-wrap gap-4",children:[(0,i.jsxs)(Q,{label:"Microphone",error:!1,children:[(0,i.jsx)(Y,{onChange:e=>l(e.currentTarget.value),value:null==a?void 0:a.deviceId,icon:(0,i.jsx)(J.Z,{size:24}),children:0===s.length?(0,i.jsx)("option",{value:"",children:"Loading devices..."}):s.map(e=>(0,i.jsx)("option",{value:e.deviceId,children:e.label},e.deviceId))}),!t&&(0,i.jsx)(ee,{})]}),(0,i.jsx)(Q,{label:"Camera",error:!1,children:(0,i.jsx)(Y,{onChange:e=>d(e.currentTarget.value),value:null==c?void 0:c.deviceId,icon:(0,i.jsx)(K.Z,{size:24}),children:0===n.length?(0,i.jsx)("option",{value:"",children:"Loading devices..."}):n.map(e=>(0,i.jsx)("option",{value:e.deviceId,children:e.label},e.deviceId))})})]})},es=s(4436);let ea=r.memo(e=>{let{startAudioOff:t,handleStartAudioOff:s,inSession:a=!1}=e,[l,n]=(0,r.useState)(!1),c=(0,r.useRef)(null),d=(0,o.WY)(),{selectedLanguage:u,setLanguage:m}=B();(0,r.useEffect)(()=>{let e=c.current;return e&&l&&(e.inert=!0,e.showModal(),e.inert=!1),()=>null==e?void 0:e.close()},[l]);let h=async e=>{d&&await m(e.target.value,d)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("section",{className:"flex flex-col flex-wrap gap-3 lg:gap-4",children:[(0,i.jsx)(et,{hideMeter:!1}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)(Q,{label:"Category",error:!1,children:(0,i.jsx)(Y,{onChange:h,value:u,icon:(0,i.jsx)(es.Z,{size:24}),children:R.map(e=>(0,i.jsx)("option",{value:e.value,children:e.name},e.value))})})})]}),!a&&(0,i.jsx)("section",{className:"flex flex-col gap-4 border-y border-primary-hairline py-4 mt-4",children:(0,i.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,i.jsxs)(O,{className:"flex flex-row gap-1 items-center",children:["Join with mic muted"," ",(0,i.jsx)(H,{text:"Start with microphone muted (click to unmute)"})]}),(0,i.jsx)(P,{checked:t,onCheckedChange:s})]})})]})},(e,t)=>e.startAudioOff===t.startAudioOff&&e.state===t.state);ea.displayName="Configure";var ei=s(5210),er=s.n(ei),el=()=>{let e=(0,o.WY)(),[t,s]=r.useState(void 0),a=()=>{e&&e.getServiceOptionsFromConfig("llm").options.find(e=>{"model"===e.name&&s(e.value)})};return(0,o.GG)(n.io.ConfigUpdated,()=>{e&&a()}),(0,i.jsx)("div",{className:er().modelBadge,children:t})};let en=r.memo(()=>{let e=(0,r.useRef)(null),t=(0,o.jG)("audio","bot");return(0,r.useEffect)(()=>{if(!t||!e.current)return;let s=e.current,a=()=>{let e=s.parentElement,t=e?e.clientWidth:300,a=e?e.clientHeight:150;s.width=2*t,s.height=2*a,s.style.width="".concat(t,"px"),s.style.height="".concat(a,"px"),i.lineCap="round",i.scale(2,2)},i=s.getContext("2d");a();let r=new AudioContext,l=r.createMediaStreamSource(new MediaStream([t])),n=r.createAnalyser();n.fftSize=1024,l.connect(n);let c=new Uint8Array(n.frequencyBinCount);i.lineCap="round";let o=[{startFreq:85,endFreq:255,smoothValue:0},{startFreq:255,endFreq:500,smoothValue:0},{startFreq:500,endFreq:2e3,smoothValue:0},{startFreq:2e3,endFreq:4e3,smoothValue:0},{startFreq:4e3,endFreq:8e3,smoothValue:0}],d=e=>Math.round(e/(r.sampleRate/2)*(n.frequencyBinCount-1));return function e(){n.getByteFrequencyData(c),i.clearRect(0,0,s.width/2,s.height/2);let t=!1,a=30*o.length+(o.length-1)*12,r=(s.width/2-a)/2;o.forEach((e,a)=>{let l=d(e.startFreq),n=d(e.endFreq),o=c.slice(l,n),u=o.reduce((e,t)=>e+t,0)/o.length;u<1?e.smoothValue=Math.max(e.smoothValue-1,0):(e.smoothValue=e.smoothValue+(u-e.smoothValue)*.2,t=!0);let m=r+42*a,h=Math.min(e.smoothValue/255*160,160),x=Math.max(s.height/2/2-h/2,15),f=Math.min(s.height/2/2+h/2,s.height/2-15);e.smoothValue>0?(i.beginPath(),i.moveTo(m+15,x),i.lineTo(m+15,f),i.lineWidth=30,i.strokeStyle="white",i.stroke()):(i.beginPath(),i.arc(m+15,s.height/2/2,15,0,2*Math.PI),i.fillStyle="white",i.fill(),i.closePath())}),t||function(e){let t=30*o.length+(o.length-1)*12,a=(s.width/2-t)/2,r=s.height/2/2;o.forEach((e,t)=>{i.beginPath(),i.arc(a+42*t+15,r,15,0,2*Math.PI),i.fillStyle="white",i.fill(),i.closePath()})}(0),requestAnimationFrame(e)}(),window.addEventListener("resize",a),()=>{r.close(),window.removeEventListener("resize",a)}},[t]),(0,i.jsx)("canvas",{ref:e,style:{display:"block",width:"100%",height:"100%"}})});en.displayName="WaveForm";let ec=(0,r.memo)(e=>{let{isReady:t,statsAggregator:s}=e,[a,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)("initializing"),[m,h]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&(l(!0),u("connected"))},[t]),(0,o.GG)(n.io.BotDisconnected,(0,r.useCallback)(()=>{l(!1),u("disconnected")},[])),(0,o.GG)(n.io.BotStartedSpeaking,(0,r.useCallback)(()=>{h(!0)},[])),(0,o.GG)(n.io.BotStoppedSpeaking,(0,r.useCallback)(()=>{h(!1)},[])),(0,r.useEffect)(()=>()=>l(!1),[]);let f=(0,x.Z)(er().agentWindow,a&&er().ready,m&&er().talking);return(0,i.jsxs)("div",{className:er().agent,children:[(0,i.jsxs)("div",{className:f,children:[(0,i.jsx)(el,{}),a?(0,i.jsx)(en,{}):(0,i.jsx)("span",{className:er().loader,children:(0,i.jsx)(d.Z,{size:32,className:"animate-spin"})})]}),(0,i.jsx)(o.iS,{participant:"local",className:er().video})]})},(e,t)=>e.isReady===t.isReady);ec.displayName="Agent";var eo=s(3920),ed=s(4697),eu=s(2434),em=s.n(eu);let eh=e=>{var t,s,a,r;let{service:l,metric:n,tip:c,sub:o="s",multiplier:d=3,data:u}=e;return(0,i.jsxs)("div",{className:em().serviceStat,children:[(0,i.jsxs)("header",{children:[(0,i.jsxs)("div",{className:em().serviceName,children:[l.charAt(0).toUpperCase()+l.slice(1)," ",n,c&&(0,i.jsx)(H,{text:c})]}),(0,i.jsxs)("div",{className:em().latest,children:[(0,i.jsx)("span",{children:"Latest"}),(0,i.jsxs)("span",{className:"font-medium",children:[null===(t=u.latest)||void 0===t?void 0:t.toFixed(d),(0,i.jsx)("sub",{children:o})]})]})]}),(0,i.jsx)("div",{className:em().chart,children:(0,i.jsxs)(eo.Sparklines,{data:u.timeseries,limit:20,height:80,svgHeight:80,children:[(0,i.jsx)(eo.SparklinesBars,{style:{fill:"#41c3f9",fillOpacity:".25"}}),(0,i.jsx)(eo.SparklinesLine,{style:{stroke:"#41c3f9",fill:"none"}}),(0,i.jsx)(eo.SparklinesReferenceLine,{type:"mean"})]})}),(0,i.jsxs)("footer",{children:[(0,i.jsxs)("div",{className:em().statValue,children:["H:",(0,i.jsxs)("span",{children:[null===(s=u.high)||void 0===s?void 0:s.toFixed(d),(0,i.jsx)("sub",{children:o})]})]}),(0,i.jsxs)("div",{className:em().statValue,children:["M:",(0,i.jsxs)("span",{children:[null===(a=u.median)||void 0===a?void 0:a.toFixed(d),(0,i.jsx)("sub",{children:o})]})]}),(0,i.jsxs)("div",{className:em().statValue,children:["L:",(0,i.jsxs)("span",{children:[null===(r=u.low)||void 0===r?void 0:r.toFixed(d),(0,i.jsx)("sub",{children:o})]})]})]})]})},ex=r.memo(e=>{let{statsAggregator:t,handleClose:s}=e,[a,l]=(0,r.useState)(t.statsMap),n=(0,r.useRef)(null);return(0,r.useEffect)(()=>(n.current&&clearInterval(n.current),n.current=setInterval(async()=>{let e=t.getStats();e&&l({...e})},2500),()=>clearInterval(n.current)),[t]),(0,i.jsxs)("div",{className:em().container,children:[(0,i.jsx)("div",{className:em().close,children:(0,i.jsx)(_,{variant:"icon",size:"iconSm",onClick:s,className:"m-3",children:(0,i.jsx)(ed.Z,{})})}),(0,i.jsx)("div",{className:em().inner,children:(0,i.jsx)("section",{className:em().sectionServices,children:Object.entries(a).length<1?(0,i.jsx)("div",{children:(0,i.jsx)(d.Z,{className:"animate-spin mx-auto"})}):Object.entries(a).map((e,t)=>{let[s,r]=e;return(0,i.jsxs)("div",{className:em().serviceTiles,children:[(0,i.jsx)(eh,{metric:"TTFB",tip:"Time to first byte",service:s,multiplier:3,data:r.ttfb},"".concat(s,"-ttfb-").concat(t)),a[s].characters&&(0,i.jsx)(eh,{metric:"Characters",sub:"",service:s,multiplier:0,data:r.characters},"".concat(s,"-chars-").concat(t)),a[s].processing&&(0,i.jsx)(eh,{metric:"Processing",service:s,data:r.processing},"".concat(s,"-proc-").concat(t))]},s)})})})]})},()=>!0);ex.displayName="Stats";var ef=s(4841),ep=s(3977),eg=s(3163),ev=s.n(eg);let eb=()=>{let e=(0,r.useRef)(null);return(0,o.GG)(n.io.LocalAudioLevel,(0,r.useCallback)(t=>{if(e.current){let s=1.75*Number(t);e.current.style.transform="scale(".concat(Math.max(.1,s),")")}},[])),(0,i.jsx)("div",{ref:e,className:ev().volume})};function ej(e){let{active:t,muted:s=!1,handleMute:a}=e,l=!s&&t,[c,u]=(0,r.useState)(!1);(0,o.GG)(n.io.BotStartedSpeaking,(0,r.useCallback)(()=>{u(!0)},[])),(0,o.GG)(n.io.BotStoppedSpeaking,(0,r.useCallback)(()=>{u(!1)},[]));let m=(0,o.WY)(),h=(0,x.Z)(s&&t&&ev().muted,!t&&ev().blocked,l&&ev().canTalk);return c?(0,i.jsx)("div",{className:"".concat(ev().bubbleContainer),onClick:()=>{m.action({service:"tts",action:"interrupt",arguments:[]})},children:(0,i.jsx)("div",{className:"".concat(ev().bubble," ").concat(h),children:(0,i.jsx)("div",{className:ev().icon,children:(0,i.jsx)(ef.Z,{size:42,className:"size-8 md:size-10"})})})}):(0,i.jsx)("div",{className:"".concat(ev().bubbleContainer),children:(0,i.jsxs)("div",{className:"".concat(ev().bubble," ").concat(h),onClick:()=>a(),children:[(0,i.jsx)("div",{className:ev().icon,children:t?l?(0,i.jsx)(J.Z,{size:42,className:"size-8 md:size-10"}):(0,i.jsx)(ep.Z,{size:42,className:"size-8 md:size-10"}):(0,i.jsx)(d.Z,{size:42,className:"size-8 md:size-10 animate-spin text-black"})}),l&&(0,i.jsx)(eb,{})]})})}let ey=r.memo(e=>{let{state:t,onLeave:s,startAudioOff:l=!1}=e,c=(0,o.WY)(),[d,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1),[x,f]=(0,r.useState)(!1),[p,g]=(0,r.useState)(l),v=(0,r.useRef)(null);return(0,o.GG)(n.io.Metrics,(0,r.useCallback)(e=>{var t;null==e||null===(t=e.ttfb)||void 0===t||t.map(e=>{a.addStat([e.processor,"ttfb",e.value,Date.now()])})},[])),(0,o.GG)(n.io.BotStoppedSpeaking,(0,r.useCallback)(()=>{d||u(!0)},[d])),(0,r.useEffect)(()=>{u(!1)},[]),(0,r.useEffect)(()=>{d&&!l&&c.enableMic(!0)},[c,l,d]),(0,r.useEffect)(()=>{a=new M},[]),(0,r.useEffect)(()=>{"error"===t&&s()},[t,s]),(0,r.useEffect)(()=>{let e=v.current;return e&&m&&(e.inert=!0,e.showModal(),e.inert=!1),()=>null==e?void 0:e.close()},[m]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("dialog",{ref:v,children:(0,i.jsxs)(w,{className:"w-svw max-w-full md:max-w-md lg:max-w-lg",children:[(0,i.jsx)(N,{children:(0,i.jsx)(C,{children:"Configuration"})}),(0,i.jsx)(k,{children:(0,i.jsx)(ea,{state:t,inSession:!0})}),(0,i.jsx)(S,{children:(0,i.jsx)(_,{onClick:()=>h(!1),children:"Close"})})]})}),x&&(0,z.createPortal)((0,i.jsx)(ex,{statsAggregator:a,handleClose:()=>f(!1)}),document.getElementById("tray")),(0,i.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center w-full",children:[(0,i.jsx)(w,{fullWidthMobile:!1,className:"w-full max-w-[320px] sm:max-w-[420px] mt-auto shadow-long",children:(0,i.jsx)(ec,{isReady:"ready"===t,statsAggregator:a})}),(0,i.jsx)(ej,{active:d,muted:p,handleMute:()=>void(c.enableMic(p),g(!p))})]}),(0,i.jsx)("footer",{className:"w-full flex flex-row mt-auto self-end md:w-auto",children:(0,i.jsxs)("div",{className:"flex flex-row justify-between gap-3 w-full md:w-auto",children:[(0,i.jsxs)(T,{children:[(0,i.jsx)(q,{children:"Interrupt bot"}),(0,i.jsx)(W,{asChild:!0,children:(0,i.jsx)(_,{variant:"ghost",size:"icon",onClick:()=>{c.action({service:"tts",action:"interrupt",arguments:[]})},children:(0,i.jsx)(G.Z,{})})})]}),(0,i.jsxs)(T,{children:[(0,i.jsx)(q,{children:"Show bot statistics panel"}),(0,i.jsx)(W,{asChild:!0,children:(0,i.jsx)(_,{variant:x?"light":"ghost",size:"icon",onClick:()=>f(!x),children:(0,i.jsx)(V.Z,{})})})]}),(0,i.jsxs)(T,{children:[(0,i.jsx)(q,{children:"Configure"}),(0,i.jsx)(W,{asChild:!0,children:(0,i.jsx)(_,{variant:"ghost",size:"icon",onClick:()=>h(!0),children:(0,i.jsx)(A.Z,{})})})]}),(0,i.jsxs)(_,{onClick:()=>s(),className:"ml-auto",children:[(0,i.jsx)(E.Z,{size:16}),"End"]})]})})]})},(e,t)=>e.state===t.state);ey.displayName="Session";let e_={idle:"Initializing...",initializing:"Initializing...",initialized:"Start",authenticating:"Requesting bot...",connecting:"Connecting..."};function ew(){let e=(0,o.WY)(),t=(0,o.Hk)(),[s,a]=(0,r.useState)("idle"),[l,c]=(0,r.useState)(null),[m,h]=(0,r.useState)(!1);async function x(){if(e)try{e.enableMic(!1),await e.start()}catch(t){c(t.message||"Unknown error occured"),e.disconnect()}}async function f(){await e.disconnect()}if((0,o.GG)(n.io.Error,(0,r.useCallback)(e=>{let t=e.data;t.fatal&&c(t.error)},[])),(0,r.useEffect)(()=>{e&&"idle"===s&&e.initDevices()},[s,e]),(0,r.useEffect)(()=>{switch(t){case"initialized":a("ready");break;case"authenticating":case"connecting":a("connecting");break;case"connected":case"ready":a("connected");break;default:a("idle")}},[t]),l)return(0,i.jsx)(v,{intent:"danger",title:"An error occurred",children:l});if("connected"===s)return(0,i.jsx)(ey,{state:t,onLeave:()=>f(),startAudioOff:m});let p="ready"===s;return(0,i.jsxs)(w,{shadow:!0,className:"animate-appear max-w-lg mb-14",children:[(0,i.jsx)(N,{children:(0,i.jsx)(C,{children:"Configuration"})}),(0,i.jsxs)(k,{stack:!0,children:[(0,i.jsxs)("div",{className:"flex flex-row gap-2 bg-primary-50 px-4 py-2 md:p-2 text-sm items-center justify-center rounded-md font-medium text-pretty",children:[(0,i.jsx)(u.Z,{className:"size-7 md:size-5 text-primary-400"}),"Works best in a quiet environment with a good internet."]}),(0,i.jsx)(ea,{startAudioOff:m,handleStartAudioOff:()=>h(!m),state:s})]}),(0,i.jsx)(S,{children:(0,i.jsxs)(_,{fullWidthMobile:!0,onClick:()=>x(),disabled:!p,children:[!p&&(0,i.jsx)(d.Z,{className:"animate-spin"}),e_[t]]},"start")})]})}let eN=(0,r.createContext)({character:0,setCharacter:()=>{throw Error("setCharacter function must be overridden")}});eN.displayName="CharacterContext";let eC=e=>{let{children:t}=e,[s,a]=(0,r.useState)(0);return(0,i.jsx)(eN.Provider,{value:{character:s,setCharacter:a},children:t})};var ek=s(8298),eS=s(8128),ez=s.n(eS),eG=()=>{let e=(0,o.WY)(),[t,s]=(0,r.useState)(void 0),[a,l]=(0,r.useState)({minutes:0,seconds:0});(0,o.GG)(n.io.Connected,(0,r.useCallback)(()=>s(null==e?void 0:e.transportExpiry),[e])),(0,o.GG)(n.io.Disconnected,(0,r.useCallback)(()=>{s(void 0),l({minutes:0,seconds:0})},[]));let c=!t||0===t;if((0,r.useEffect)(()=>{if(c)return;let e=()=>{c&&clearInterval(s);let e=t-Math.floor(Date.now()/1e3);l({minutes:Math.floor(e/60),seconds:e%60})},s=setInterval(e,1e3);return e(),()=>clearInterval(s)},[c,t]),c)return null;let d=a.minutes<=0&&a.seconds<=0;return(0,i.jsxs)(T,{children:[(0,i.jsx)(W,{children:(0,i.jsxs)("div",{className:ez().expiry,children:[(0,i.jsx)(ek.Z,{size:20}),(0,i.jsx)("span",{className:p(ez().time,d&&ez().expired),children:d?"--:--":"".concat(a.minutes,"m ").concat(a.seconds.toString().padStart(2,"0"),"s")})]})}),(0,i.jsx)(q,{children:(0,i.jsx)("p",{children:"Remaining session time before expiry"})})]})},eV=s(5967);function eA(){let{logout:e}=(0,eV.a)(),[t,s]=(0,r.useState)(!1);return(0,i.jsxs)("header",{id:"header",className:"sticky top-0 z-50 w-full border-b border-gray-200 bg-white/80 backdrop-blur-xl",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,i.jsx)("div",{className:"flex items-center gap-4"}),(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)(eG,{}),(0,i.jsx)("button",{onClick:()=>{s(!0)},className:"px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900",children:"Logout"})]})]}),t&&(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full mx-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Confirm Logout"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to log out?"}),(0,i.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,i.jsx)("button",{onClick:()=>{s(!1)},className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 border border-gray-300 rounded-md",children:"Cancel"}),(0,i.jsx)("button",{onClick:()=>{e(),s(!1)},className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md",children:"Logout"})]})]})})]})}let eE=()=>(0,i.jsx)("div",{className:"min-h-screen w-full flex flex-col items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50",children:(0,i.jsxs)("div",{className:"text-center space-y-4",children:[(0,i.jsx)(d.Z,{className:"h-12 w-12 animate-spin text-blue-600 mx-auto"}),(0,i.jsx)("h2",{className:"text-xl font-medium text-gray-700",children:"Initializing Assistant..."}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Setting up your interactive experience"})]})});function eM(){let[e,t]=(0,r.useState)(null),[s,a]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{let s=!0;return(async()=>{try{a(!0);let e=new c.e({baseUrl:"/api",services:F,config:Z,timeout:3e4,enableCam:!0}),i=new n.xQ({callbacks:{onLLMFunctionCall:()=>{new Audio("shutter.mp3").play()}}});e.registerHelper("llm",i),s&&(t(e),a(!1))}catch(e){console.error("Failed to initialize voice client:",e),s&&a(!1)}})(),()=>{s=!1,e&&(e.removeAllListeners(),t(null))}},[]),s||!e)?(0,i.jsx)(eE,{}):(0,i.jsxs)(o.HV,{voiceClient:e,children:[(0,i.jsx)(eC,{children:(0,i.jsxs)(l.pn,{children:[(0,i.jsxs)("main",{children:[(0,i.jsx)(eA,{}),(0,i.jsx)("div",{id:"app",children:(0,i.jsx)(ew,{})})]}),(0,i.jsx)("aside",{id:"tray"})]})}),(0,i.jsx)(o.O6,{})]})}},5967:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return d},a:function(){return u}});var a=s(7437),i=s(2265),r=s(5186);let l=(0,s(5236).ZF)({apiKey:"AIzaSyABFhA56f4Jt4Zt5mWGCfUE-i8t0NG3ZQ0",authDomain:"apka-mitra.firebaseapp.com",projectId:"apka-mitra",storageBucket:"apka-mitra.firebasestorage.app",messagingSenderId:"858727056315",appId:"1:858727056315:web:c803f516b2cd365f8bba9e"}),n=(0,r.v0)(l);var c=s(6463);let o=(0,i.createContext)({user:null,loading:!0,error:null,isPhoneVerified:!1,signInWithGoogle:async()=>{},logout:async()=>{},setPhoneVerified:()=>{}});function d(e){let{children:t}=e,[s,l]=(0,i.useState)(null),[d,u]=(0,i.useState)(!0),[m,h]=(0,i.useState)(null),[x,f]=(0,i.useState)(!1),p=(0,c.useRouter)();(0,i.useEffect)(()=>{let e=n.onAuthStateChanged(e=>{l(e),u(!1),e?document.cookie="auth=true; path=/":(document.cookie="auth=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT",f(!1))});return()=>e()},[]);let g=async()=>{try{h(null);let e=new r.hJ;e.setCustomParameters({prompt:"select_account"}),(await (0,r.rh)(n,e)).user&&f(!1)}catch(e){console.error("Error signing in with Google:",e),h(e.message||"Failed to sign in with Google")}},v=async()=>{try{h(null),await (0,r.w7)(n),p.push("/login")}catch(e){console.error("Error signing out:",e),h(e.message||"Failed to sign out")}};return(0,a.jsx)(o.Provider,{value:{user:s,loading:d,error:m,isPhoneVerified:x,signInWithGoogle:g,logout:v,setPhoneVerified:e=>{f(e),e&&p.push("/")}},children:t})}let u=()=>(0,i.useContext)(o)},8128:function(e){e.exports={expiry:"styles_expiry__ztArG",expired:"styles_expired__EjOt7",time:"styles_time__hWuTM"}},5210:function(e){e.exports={agent:"styles_agent__BvGy7",agentWindow:"styles_agentWindow__aD690",video:"styles_video__sUmcB",ready:"styles_ready__n4bhA",talking:"styles_talking__Uw4_o",agentFooter:"styles_agentFooter__L_dZ1",status:"styles_status__49raE",statusIndicator:"styles_statusIndicator__cFUk6",statusDefault:"styles_statusDefault__NBYZI",statusOrange:"styles_statusOrange__AZ_fT",statusRed:"styles_statusRed___QDvE",statusGreen:"styles_statusGreen__AHqKA",loader:"styles_loader__ECKe3",modelBadge:"styles_modelBadge___Nb0z",face:"styles_face___dmJT",faceAppear:"styles_faceAppear__ed1uo",faceBubble:"styles_faceBubble__O9BHO"}},2434:function(e){e.exports={container:"styles_container__aRvV9",appear:"styles_appear__k163m",inner:"styles_inner__LMC8B",close:"styles_close__0CGRw",networkStats:"styles_networkStats__Z4Io9",statsHeader:"styles_statsHeader__SjDHL",monoHeader:"styles_monoHeader__rcm8Z",section:"styles_section__wWohY",sectionServices:"styles_sectionServices___HeW1",serviceTiles:"styles_serviceTiles__nAL8H",serviceStat:"styles_serviceStat__Rpw8B",serviceName:"styles_serviceName__TVxdm",latest:"styles_latest__qVo21",statValue:"styles_statValue__yo02j",chart:"styles_chart__GGqkV"}},3163:function(e){e.exports={bubbleContainer:"styles_bubbleContainer__GVFTM",bubble:"styles_bubble__c_nix",icon:"styles_icon__DhRJo",canTalk:"styles_canTalk__WbvKD",blocked:"styles_blocked__zphwh",muted:"styles_muted__6flJz",pulseText:"styles_pulseText__nUraL",volume:"styles_volume__CTj4U",transcript:"styles_transcript__GDfWW",typewriter:"styles_typewriter__Dpm_O",word:"styles_word__ZIn00",pulse:"styles_pulse__GAmF8"}},1942:function(e){e.exports={bar:"styles_bar__mFEKR"}}},function(e){e.O(0,[541,400,878,638,69,971,23,744],function(){return e(e.s=4331)}),_N_E=e.O()}]);